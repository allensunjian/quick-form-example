(function(){"use strict";var __webpack_modules__={2859:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6699),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__),_utils_directives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7181),vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3396),element_plus__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8631),element_plus__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8365),element_plus__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1088),element_plus__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9523),element_plus__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1015),element_plus__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(9667),element_plus__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9969),element_plus__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(300),element_plus__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(3417),element_plus__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(438),element_plus__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(5791),element_plus__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(7188),_element_plus_icons_vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2748);let _app=null;const _EVENT_="formChange",_FROM_EVENT_="formEvent",EVENT_CHANGE="change",TEXT_EL="span",FROM_INS="_quickFrom",FROM_C="quick-form__label--container",FROM_C_EL="div",FORM_EL_IMG="img",HandleProps=["children","options","directives","formElementType","formElementLabel","key","tirrgerEvents","textValue","currentPropPath","itemStyle","preventDefaultEvent","component","slotOptions","optionLabelKey","optionValueKey","mainType","subType","mountModelValue","showControll","childrenOptions"],TemplateReg=/\{\{.*?\}\}/g,emitVal=e=>(t,n)=>(o,r={})=>{e.$emit(_EVENT_,{type:t,key:n,val:o,...r})},emitEvent=e=>(t,n)=>o=>{e.$emit(_FROM_EVENT_,{type:t,key:n,val:o})},Throttling=function(e,t){let n=null;return function(...o){let r;n&&clearTimeout(n),n=setTimeout((()=>{t.apply(r,o),clearTimeout(n)}),e)}},VnodeImg={props:{imgOption:{type:Object,default:()=>({})},imgData:{type:Object,default:()=>({})},imgControll:{type:Array,default:()=>[]},showControll:{type:Boolean,default:!0},currentIndex:{type:Number,default:null}},render(){const e=this,t=e.imgOption,n=e.imgControll,o=e.showControll,r=e.currentIndex,l={preview:()=>ElementCreator.icon({children:[_element_plus_icons_vue__WEBPACK_IMPORTED_MODULE_2__.Gq5],..._,onClick:s("preview")}),download:()=>ElementCreator.icon({children:[_element_plus_icons_vue__WEBPACK_IMPORTED_MODULE_2__.UWx],..._,onClick:s("download")}),delete:()=>ElementCreator.icon({children:[_element_plus_icons_vue__WEBPACK_IMPORTED_MODULE_2__.HG3],..._,onClick:s("delete")})},a=()=>Array.isArray(n)?n.map((e=>e in l?l[e]():"")):[],i=()=>(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(FORM_EL_IMG,{src:e.imgData.url,height:100,...t,class:"quick-form__imglist--item"}),_={size:16,color:"#fff"},s=t=>()=>{e.$emit("imgEvent",t,r)},c=()=>(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(FROM_C_EL,{class:"quick-form__imglist--itemModal"},a());let u=null;return u=(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(FROM_C_EL,{class:"quick-form__imglist--itemwarp",style:"height: 100px"},o&&n.length>0?[i(),c()]:[i()]),u}},VnodeImgList={props:{listOption:{type:Object,default:()=>({})},imgList:{type:Array,default:()=>[]}},render(){const e=this,t=e.listOption;let n=e.imgList;Array.isArray(n)||(n=[],console.error("传入的图片数据结构不是个数组！"));const o=function(t,n){e.$emit(t,n)};return(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(FROM_C_EL,{class:FROM_C},n.map?n.map(((e,n)=>(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(VnodeImg,{imgData:e,imgOption:t.itemStyle||{},imgControll:t.controll,showControll:"boolean"!=typeof t.showControll||t.showControll,currentIndex:n,onImgEvent:o}))):[])}},ElementCreator={switch:(e,t)=>{t.emit("change",e.key);const n=t.clearHandleProps(e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_4__.OX,{...n,...t.createEventMap(e,t),modelValue:t.getModelValue(e)}),e,t)},time:(e,t)=>{const n=t.emit("change",e.key),o=t.clearHandleProps(e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_5__.ah,{...o,...t.createEventMap(e,t),modelValue:t.getModelValue(e),"onUpdate:modelValue":Throttling(50,(function(o){t.upDateFromData(o,e.mountModelValue||e.key),n(o)}))}),e,t)},date:(e,t)=>{const n=t.clearHandleProps(e),o=t.emit("change",e.key);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_6__.i,{...n,...t.createEventMap(e,t),modelValue:t.getModelValue(e),"onUpdate:modelValue":Throttling(50,(function(n){t.upDateFromData(n,e.mountModelValue||e.key),o(n)}))}),e,t)},imgList:(e,t)=>{const n=t.emitEvent("formEvent",e.formElementType);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(VnodeImgList,{imgList:t.GetParentModelVal(e.currentPropPath),listOption:e,...e,onPreview:function(t){n({type:"preview",key:e.key,index:t})},onDelete:function(t){n({type:"delete",key:e.key,index:t})},onDownload:function(t){n({type:"download",key:e.key,index:t})}}),e,t)},upload:(e,t)=>{const n="detail"==e.subType,o=t.clearHandleProps(e);let r=e.accept;r&&Array.isArray(r)&&(delete e.accept,r=r.join(","));const l=function(e){const n=e.mountModelValue||e.key,{name:o,url:r}=e.alias||{name:"name",url:"url"};(t.scope.formData[n]||[]).forEach((e=>{"name"in e&&"url"in e||(e.name=e[o],e.url=e[r])}));const l=()=>{if(!(n in t.scope.formData))return console.warn("invalid depend key "+n),[];try{return t.scope.formData[n]}catch(e){return console.warn("invalid depend key "+n),[]}};return{fileList:l()}},a=n?{class:"quick-form__upload--detail",...l(e),...t.createEventMap(e,t)}:{...t.createEventMap(e,t),...l(e),...o};return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_7__.LW,{onHttpRequest:e=>{console.log(e)},...a,accept:r},(()=>n?[]:t.createElementDeep(e))),e,t)},icon:e=>{let t=[];const n=ClearHandleProps(e);try{t=(e.children||[]).map((e=>(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(e)))}catch(o){t=[]}return(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_8__.gn,{...n},(()=>t))},text:(e,t)=>{let n,o;t&&t.getModelValue&&(n=t&&t.getModelValue(e),o=t.createEventMap(e,t));const r=t.clearHandleProps(e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(TEXT_EL,{...o,...r},[t.parseTempSyntax(e.textValue)||n||""]),e,t)},container:(e,t)=>{const n=t.clearHandleProps(e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)("div",{...t.createEventMap(e,t),...n},t.createElementDeep(e)),e,t)},inputNumber:(e,t)=>t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_9__.d6,{modelValue:t.getModelValue(e),...t.createEventMap(e,t),...e}),e),radio:(e,t)=>{const n=e.children;return delete e.children,t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_10__.rh,{modelValue:t.getModelValue(e),onClick:Throttling(50,(()=>{t.upDateFromData(e.label,e.mountModelValue||e.key)})),...e},(()=>n)),e,t)},checkbox:(e,t)=>{const n=e.children;return delete e.children,t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_11__.Xb,{modelValue:!!Array.isArray(t.getModelValue(e))&&t.getModelValue(e).indexOf(e.label)>=0,onClick:Throttling(50,(function(){const n=t.getModelValue(e),o=n.indexOf(e.label);o>=0?n.splice(o,1):n.push(e.label)})),...e},(()=>n)),e,t)},input:(e,t)=>{if("number"==e.subType)return ElementCreator.inputNumber(e,t);const n=t.clearHandleProps(e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_12__.EZ,{modelValue:t.getModelValue(e),...t.createEventMap(e,t),placeholder:e.placeholder,type:e.subType?e.subType:"text",...n}),e,t)},select:(e,t)=>{const n=t.clearHandleProps(e),o=e.options,r=[],l=e.optionLabelKey||"label",a=e.optionValueKey||"value",i=(e=[])=>{(e||[]).forEach((e=>{const t=(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_13__.BT,{value:e[a],label:e[l]});r.push(t)}))};return i(t.getComponentDeps(o)),t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_13__.km,{modelValue:t.getModelValue(e),...t.createEventMap(e,t),...n},(()=>r)),e,t)},button:(e,t)=>{const n=t.clearHandleProps(e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_14__.mi,{...n,onClick:()=>t.emitEvent("formEvent",e.key)()},(()=>t.createElementDeep(e))),e,t)},formFrame:(e,t,n)=>{const o=[];let r,l=null;n?(l=n.containerVnode,r=n.itemVnode):l=element_plus__WEBPACK_IMPORTED_MODULE_15__.ly;const a=t.GetLayout();return e.forEach(((e,n)=>{o.push(ElementCreator.formItemFrame(e,t,n,r))})),(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(l,{rules:t.scope.rules,model:t.scope.formData,ref:FROM_INS,...a},r?o:()=>0==o.length?(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)("div",{class:"quick-form__state--align--center quick-form__fc--light"},["请设置表单元素"]):o)},formItemFrame:(e,t,n,o)=>{const r=e.formElementType||"container",l=e.formElementLabel,a=e.key,i=t.GetCombinationType(r);if("slot"==i.mainType){if(!i.subType||!(i.subType in ElementCreator))return!i.subType&&e.component?t.renderComponents(e):ElementCreator.container({children:[i.subType?"无法找到插槽："+i.subType:"请传入自定义组件"]},t);ElementCreator[i.subType](e,t)}const _=(e,t,n)=>{if(e in ElementCreator){const o=[],r=t.childrenOptions;return Array.isArray(r)&&"text"!==e?(delete t.childrenOptions,r.forEach((r=>{const l=r.formElementType?n.GetCombinationType(r.formElementType):{};r.formElementType&&(e=l.mainType),o.push(ElementCreator[e]({key:t.key,...r,...l},n))})),o):[ElementCreator[e]({...t,...i},n)]}return[]},s=t.clearHandleProps(e),c=(e,t)=>(Object.keys(t).forEach((n=>{"class"==n&&(e[n]=(e[n]||"")+` ${t[n]}`)})),e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(o||element_plus__WEBPACK_IMPORTED_MODULE_15__.nH,c({...mountDrag(t,n),prop:a,label:t.parseTempSyntax(l),...s},{class:`${t.GetDrag()?"el-form-item__drag":""} ${t.GetEditOption()?"el-form-item__edit":""}`}),o?[_(i.mainType,{...e,...i},t)]:()=>[_(i.mainType,{...e,...i},t),t.GetEditOption()?(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)("div",{class:"edit__tools"},[(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_14__.mi,{type:"danger",size:"small",onClick(){t.emitEvent("formEvent","")({type:"delete_option",resouce:t.scope.quickOptions.formOptions,value:e,pos:n})}},(()=>["删除"])),(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_14__.mi,{type:"primary",size:"small",onClick(){t.emitEvent("formEvent","")({type:"edit_option",resouce:t.scope.quickOptions.formOptions,value:e,pos:n})}},(()=>["编辑"]))]):""]),e,t)}},mountDrag=(()=>{let e=-1,t=-1,n=!1;const o="quick-form__state--drag_here",r=e=>{e.dataTransfer.dropEffect="move"};return(l,a)=>{const i=l.GetDrag(),_={style:""+(i?"position: relative":""),draggable:!0,onDrag:t=>(r(t),n=!0,e=a,t.preventDefault()),onDragover:e=>(r(e),e.target.classList.add(o),e.preventDefault()),ondragleave:e=>(e.target.classList.remove(o),!!n&&e.preventDefault()),onDrop:r=>{r.target.classList.remove(o),n=!1,t=a,l.positionChanger(e,t),e=-1,t=-1}},s={};return i?_:s}})(),UperHelper=e=>{const t=e.split(""),n=t.shift().toUpperCase();return`on${n}${t.join("")}`},ClearHandleProps=e=>{const t={};return Object.keys(e).forEach((n=>{HandleProps.includes(n)||(t[n]=e[n])})),t},eventMap=(()=>{const e=["input","change","blur","mouseover","mouseenter"];e.default="input";const t=["change"];t.default="change";const n=["click"];n.default="click";const o=["preview","remove","success","error","progress","change","exceed","upload","remove"];o.default="change";const r=["click","mouseover","mouseenter"];r.default="click";const l=["click","mouseover","mouseenter","change"];l.default="change";const a=["click","mouseover","mouseenter","change"];a.default="click";const i=["click","mouseover","mouseenter","change","blur","focus","calendarChange","panelChange","visibleChange"];i.default="change";const _=["click","mouseover","mouseenter","change","blur","focus","calendarChange","panelChange","visibleChange"];_.default="change";const s=["click","mouseover","mouseenter","change"];s.default="change";const c={input:e,select:t,text:n,upload:o,container:r,checkbox:l,radio:a,date:i,time:_,switch:s},u=(e,t)=>{if(e in c){if(Array.isArray(t)){const n=[],o=c[e].default,r={originalEvent:o,mountEvent:UperHelper(o)};return t.forEach((r=>{r!=o&&(c[e].includes(r)?n.push({originalEvent:r,mountEvent:UperHelper(r)}):console.warn("未在元素类型："+e+"找到："+t+"方法"))})),n.push(r),n}return c[e].default||console.warn("can not found default event in "+e),[{originalEvent:c[e].default,mountEvent:UperHelper(c[e].default)}]}return console.warn("未定义:"+e+"元素类型"),[]},p=e=>c[e]?.default;return{getEvents:u,getDefaultEvent:p}})(),Methods={methods:{getFrom(){const e=this;return e.$refs[FROM_INS]},addItem(e){const t=this;t.quickOptions.formOptions.push(e),t._updateComponents()},_updateComponents(){const e=this;e.$nextTick((()=>{e.$forceUpdate()}))},resetRules(e){const t=this,n="StateLib"+t._raw;if(n in window){const n=window["StateLib"+t._raw].getDeleteKey(),o=Object.keys(e).reduce(((t,o)=>(-1==n.indexOf(o)&&(t[o]=e[o]),t)),{});t.$emit("ruleChange",o)}return new Promise(((e,t)=>{setTimeout((()=>{e("")}),200)}))}}},_Data={data:()=>({_quickOptions:{},defaultValue:"未匹配到key",_raw:(new Date).getTime()})},Props={props:{formData:{type:Object,default:()=>({})},quickOptions:{type:Object,default:()=>({})},depOptions:{type:Object,default:()=>({})},rules:{type:Object,default:()=>({})}}},MountMainUtils=function(myThis){const _emitVal=emitVal(myThis),_emitEvent=emitEvent(myThis),_UTILS={},GetCombinationType=e=>{const t=e.split(":"),n=t[0],o=t[1];return{mainType:n,subType:o}},getModelValue=e=>{let t,n=null;return e?("string"==typeof e?n=e:(n=e.key,t=e.mountModelValue),t&&t in myThis.formData&&(n=t),n in myThis.formData?myThis.formData[n]:null):null},createEventMap=(e,t)=>{if(!e.formElementType)return{};const n=GetCombinationType(e.formElementType).mainType,o=eventMap.getEvents(n,e.tirrgerEvents),r={};return o.forEach((({mountEvent:o,originalEvent:l})=>{const a=_emitVal(l,e.key),i=eventMap.getDefaultEvent(n);r[o]=l==i?(n,o)=>{if(e.preventDefaultEvent||t.upDateFromData(n,e.mountModelValue||e.key),"select"==e.formElementType){const o=e.optionValueKey||"value",r=e.optionLabelKey||"label",l=e.redundantKeys||[],i=t.getComponentDeps(e.options).filter((e=>e[o]==n)).map((e=>({value:e[o],label:e[r],...l.reduce(((t,n)=>(t[n]=e[n],t)),{})})));return a(n,{option:i[0]})}a(n)}:a})),r},GetLayout=()=>myThis.quickOptions.layout,GetConfig=()=>myThis.quickOptions.conifg,GetDrag=()=>Boolean(myThis.quickOptions.drag),GetEditOption=()=>Boolean(myThis.quickOptions.edit),upDateFromData=(e,t)=>{if(t in myThis.formData){if(e instanceof Event)return;myThis.formData[t]=e}},getMountModelValue=e=>{const t={},n=e.mountModelValue;return"string"==typeof n&&(t[n]=myThis.formData[e.key]),t},createElementDeep=e=>{const t=e.children||[],n=e.key,o=[...e.currentPropPath||[],n],r=[];if(Array.isArray(t))return t.forEach((e=>{if("string"==typeof e)return r.push(ElementCreator.text({textValue:e},_UTILS));const t=e.formElementType;t in ElementCreator?(e.currentPropPath=o,r.push(ElementCreator[t]({...e,key:n},_UTILS))):console.warn("validate child option:"+JSON.stringify(e))})),r},GetParentModelVal=e=>{const t=e.shift(),n=getModelValue(t);return n==myThis.defaultValue&&console.warn("can not found parent prop "+t),n},ParseDirective=(vnode,options,utils)=>{const directives=options.directives;if(Array.isArray(directives)){const s=directives.map((ds=>{const directive=ds[0],QueryString="_UTILS.scope.formData",QueryDepString="_UTILS.scope.depOptions",condition=ds[1].replace(new RegExp("scope","g"),QueryString).replace(new RegExp("depScope","g"),QueryDepString);return[(0,vue__WEBPACK_IMPORTED_MODULE_3__.Q2)(directive),eval(condition),utils,options.key]}));vnode=(0,vue__WEBPACK_IMPORTED_MODULE_3__.wy)(vnode,s)}return vnode},RenderComponents=e=>{const t=e.slotOptions||{},n=t.props||[],o=t.receiver||[],r=n.reduce(((e,t,n)=>{try{e[t.prop]="self"==t.type?t.value:{..._UTILS.scope.formData,..._UTILS.scope.depOptions}[t.value]}catch(o){console.log(o)}return e}),{}),l=_UTILS.emitEvent("formEvent",e.formElementType),a=o.reduce(((t,n,o)=>(t[UperHelper(n)]=function(t){l({type:n,key:e.key,value:t})},t)),{});return ParseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(e.component,{...r,...a}),e,_UTILS)},GetComponentDeps=e=>"string"==typeof e?e in myThis.depOptions?myThis.depOptions[e]:(console.warn("invalid depName:"+e),[]):Array.isArray(e)?e:void console.warn("invalid depName type:"+typeof e+", must be Array or String"),ParseTempSyntax=function(e){if("string"==typeof e){const t=e.match(TemplateReg);t&&t.length>0&&t.map((t=>{const n=t.replace("{{","").replace("}}",""),o=Object.assign({},_UTILS.scope.formData,_UTILS.scope.depOptions),r=o[n];e=e.replace(t,r)}))}return e},RulesState=(()=>{const e=[];return{resetState(t,n){const o=e.indexOf(t);n?o>=0&&e.splice(o,1):-1==o&&e.push(t)},getDeleteKey(){return e},resetRules(e){window["StateLib"+myThis._raw]=this}}})(),PositionChanger=function(e,t){const n=myThis.quickOptions.formOptions;if(e>=0&&t>=0&&e!==t){const o=n.splice(e,1)[0];e>t?n.splice(t,0,o):n.splice(t-1,0,o),_emitEvent("optionChange")({targetOption:o,start:e,end:t,currentOptions:JSON.stringify(_UTILS.getGlobalOptions())}),myThis.$forceUpdate()}};return _UTILS.scope=myThis,_UTILS.emit=_emitVal,_UTILS.getModelValue=getModelValue,_UTILS.eventMap=eventMap,_UTILS.createEventMap=createEventMap,_UTILS.GetCombinationType=GetCombinationType,_UTILS.GetLayout=GetLayout,_UTILS.GetConfig=GetConfig,_UTILS.GetDrag=GetDrag,_UTILS.GetEditOption=GetEditOption,_UTILS.upDateFromData=upDateFromData,_UTILS.getMountModelValue=getMountModelValue,_UTILS.createElementDeep=createElementDeep,_UTILS.GetParentModelVal=GetParentModelVal,_UTILS.emitEvent=_emitEvent,_UTILS.parseDirective=ParseDirective,_UTILS.renderComponents=RenderComponents,_UTILS.clearHandleProps=ClearHandleProps,_UTILS.getComponentDeps=GetComponentDeps,_UTILS.parseTempSyntax=ParseTempSyntax,_UTILS.rulesState=RulesState,_UTILS.positionChanger=PositionChanger,_UTILS.getGlobalOptions=()=>myThis.quickOptions,_UTILS},MainRender=function(){return{render(){const e=this,t=e.quickOptions.formOptions||[],n=e.quickOptions.config,o=(e.depOptions,MountMainUtils(e));let r=!1;n&&"hander"==n.renderType&&n.containerVnode&&n.itemVnode&&(r=!0);const l=ElementCreator.formFrame(t,o,r?n:void 0);return l}}},_QuickForm={...Props,..._Data,...Methods,..._utils_directives__WEBPACK_IMPORTED_MODULE_1__.Z,...MainRender()},QuickForm=function(e){return(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(_QuickForm,e)},HasDirective=e=>Boolean(_utils_directives__WEBPACK_IMPORTED_MODULE_1__.Z.directives[e]),mount=function(e){e.component("quick-form",_QuickForm),_app=e};__webpack_exports__["ZP"]={install:mount}},7181:function(e,t){const n="sif",o={directives:{[n]:{updated:(()=>{let e=null,t=null;return(o,r)=>{console.log(1111111111,o,r);const l=r.arg;if(!l)return;const a=o.style.display,i=r.modifiers;l.scope._rules;null==e&&(e=a),l.rulesState.resetState(i,r.value),l.scope.$nextTick((()=>{r.value?o.style.display=e:o.style.display="none"})),t&&clearTimeout(t),t=setTimeout((()=>{l.rulesState.resetRules(n)}),200)}})()}}};t["Z"]=o},5860:function(e,t,n){var o=n(9242),r=n(3396),l=n(4870);const a={quickHeader:{background:"rgb(32,161,98)",height:"64px",width:"100%",position:"fixed",top:"0",left:0,fontSize:"32px",color:"#fff",lineHeight:"64px",padding:"0 20px",zIndex:9999},quickSubTitle:{fontSize:"16px"},github:{float:"right",marginRight:"40px",marginTop:"14px",cursor:"pointer"}};var i=(0,r.aZ)({setup(){const{classes:e}=window._createStyleSheet(a),t=n(4147),o=()=>{window.open("https://github.com/allensunjian/quick-form")};return()=>(0,r.Wm)("div",{class:e.quickHeader},[(0,r.Wm)("span",null,[(0,r.Uk)("QUICK-FORM")," ",(0,r.Wm)("span",{class:e.quickSubTitle},[(0,r.Uk)("--v"),t.version])]),(0,r.Wm)("svg",{class:e.github,onClick:o,height:"32","aria-hidden":"true",viewBox:"0 0 16 16",version:"1.1",width:"32","data-view-component":"true"},[(0,r.Wm)("path",{"fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"},null)])])}}),_=n(4522),s=n(5505);const c={code:String,height:Number},u=(e,t)=>{const n=s.j6.create(e?.refs.monaco,{theme:"vs-dark",readOnly:!1,value:t,minimap:{enabled:!1},tabSize:2,scrollBeyondLastLine:!1});return n};var p=(0,r.aZ)({props:c,emits:["getCode"],setup(e,{emit:t}){const n=(0,r.FN)(),{code:o,height:a}=(0,l.BK)(e);let i=null;const _={quickEditorWrap:{width:"600px",height:a.value+"px",display:"inline-block",position:"relative"},mocaWarp:{width:"600px",height:a.value+"px",display:"inline-block"},quickRun:{position:"absolute",top:"0px",right:0,color:"#fff",background:"green",display:"inline-block",padding:"2px 8px","border-radius":"2px",cursor:"pointer"}},{classes:s}=window._createStyleSheet(_);(0,r.bv)((()=>{i?i.setValue(o.value):(i=u(n,o.value),(0,r.Y3)((()=>{console.log(i.getAction(["editor.action.formatDocument"]))})))}));const c=()=>{t("getCode",i.getValue())};return(0,r.YP)(o,(()=>{i&&i.setValue(o.value)})),function(){return(0,r.Wm)("div",{class:s.quickEditorWrap},[(0,r.Wm)("div",{class:s.mocaWarp,ref:"monaco"},null),(0,r.Wm)("span",{onClick:c,class:s.quickRun},[(0,r.Uk)("运行")])])}}});const m={code:String,height:Number,title:String},d={quickCodeViewTitle:{fontSize:"22px",textAlign:"center",color:"#fff",paddingTop:"40px"}};var E=(0,r.aZ)({props:m,emits:["codeChange"],setup(e,{slots:t,emit:n}){const{code:o}=(0,l.BK)(e),a=(0,l.qj)({_code:e.code,_height:e.height,_title:e.title}),i=e=>{a._code=e},s=e=>{n("codeChange",e)},{classes:c}=window._createStyleSheet(d);return(0,r.YP)(o,(e=>{a._code=e})),()=>(0,r.Wm)("div",null,[(0,r.Wm)("div",{class:c.quickCodeViewTitle},[a._title]),(0,r.Wm)("div",null,[t.default?t.default():""]),(0,r.Wm)("div",{style:"margin-top: 40px"},[(0,r.Wm)(_.Z,{height:a._height,code:a._code,onCodeChange:s},null),(0,r.Wm)(p,{height:a._height,code:a._code,onGetCode:i},null)])])}}),f=n(5791),h=n(6579);const y={dragLayout:{height:"800px"},dragTitle:{padding:"40px 0 80px 0",color:"#fff",fontSize:"22px",textAlign:"center"},dragContent:{display:"flex",height:"600px",background:"#fff",boxSizing:"border-box"},toolbar:{flex:"0 0 80px",borderRight:"3px solid rgb(158,204,171)",display:"flex",flexDirection:"column",alignItems:"center",padding:"10px 0",boxSizing:"border-box",height:"100%",overflow:"hidden","overflow-y":"auto"},dragView:{display:"flex",flex:1},toolbarItem:{flex:" 0 0 60px",width:"60px",alignItems:"center",justifyContent:"center",display:"flex",border:"1px dashed var(--el-border-color);",cursor:"pointer",marginBottom:"10px"},dragElementView:{padding:"20px",display:"flex",flex:1,border:"2px dashed var(--el-color-primary-dark-2)",justifyContent:"center",alignItems:"center",fontSize:"20px",height:"100%",color:"var(--el-menu-border-color)",boxSizing:"border-box"},stateOver:{border:"1px solid var(--el-color-success)",boxSizing:"border-box"},dragIntro:{padding:"10px",color:"#fff"}},v={toolTip:{display:"flex",width:"100%",height:"100%",color:"var(--el-menu-border-color)",alignItems:"center","justify-content":"center","font-size":"20px","pointer-events":"none"},"toolTip__state--danger":{color:"var(--el-color-danger)"},"toolTip__state--warn":{color:"var(--el-color-warning)"},"toolTip__state--success":{color:"var(--el-color-success)"}};var g;(function(e){e["warn"]="toolTip__state--warn",e["danger"]="toolTip__state--danger",e["success"]="toolTip__state--success"})(g||(g={}));const D="quick-form__state--element-over";var T=(0,r.aZ)({setup:()=>{let e=(0,r.FN)();const{classes:t}=window._createStyleSheet(y),n=window._createStyleSheet(v),o=(e,n,o)=>{const l=I(e.elementType,e.viewType,e.componentName),a=(0,r.Wm)("div",{draggable:"true",class:t.toolbarItem,onDrag:l.drag,onDragleave:l.dragleave,onDragover:l.dragover},[o.length>0?o:n]);return(0,r.Y3)((()=>{L.setEl(e.componentName,a)})),a},a={"shotcut-view":o,"shotcut-input":o,"shotcut-button":o,"shotcut-text":o,"shotcut-select":o,"shotcut-radio":o,"shotcut-checkbox":o,"shotcut-textarea":o,"shotcut-upload":o,"shotcut-switch":o},i={"container-view":(e,n,o)=>{const l=I(e.elementType,e.viewType,e.componentName),a=(0,r.Wm)("div",{draggable:"true",class:t.dragElementView,onDrag:l.drag,onDragleave:l.dragleave,onDragover:l.dragover,onMousemove:l.mousemove},[o.length>0?o:p.getQuickForm(e)]);return(0,r.Y3)((()=>{L.setEl(e.componentName,a)})),a}},_={formOptions:[],layout:{labelWidth:100,size:"default",labelPosition:"right"},edit:!1},s=(0,l.qj)({}),c=(0,l.qj)({}),u={},p={getQuickForm:function(e){s[e.componentName]||(s[e.componentName]=JSON.parse(JSON.stringify(_))),c[e.componentName]||(c[e.componentName]={}),u[e.componentName]||(u[e.componentName]={FormChange:e=>{},FormEvent:t=>{if(!t.key&&"delete_option"==t.val.type){const n=t.val.pos,o=t.val.resouce,r=t.val.value,l=r.key;o.splice(n,1),void 0!==c[e.componentName][l]&&delete c[e.componentName][l]}if(!t.key&&"edit_option"==t.val.type){t.val.pos,t.val.resouce;const n=t.val.value;n.key;T.parseCurrentFormOptions(n,e.componentName)}}});const t=(0,r.h)("div",{class:"dragFormWrap"},[(0,r.h)("div",{class:"quick-form__state--align--center quick-form__state--mb--20 quick-form__fc--default"},[`表单${e.componentName}`,(0,r.h)(f.mi,{style:"float: right",type:""+(s[e.componentName].edit?"success":"primary"),size:"small",onClick:()=>{const t=s[e.componentName].edit;s[e.componentName].edit=!t}},(()=>[""+(s[e.componentName].edit?"保存":"编辑")]))]),(0,r.h)(h.XX,{ref:e.componentName,formData:c[e.componentName],quickOptions:s[e.componentName],onFormEvent:u[e.componentName].FormEvent,onFormChange:s[e.componentName].FormChange})]);return t},itemGenFac:function(e){return(0,r.Wm)((0,r.up)("el-dialog"),{modelValue:d.value,title:"Tips",width:"30%"},{default:()=>[(0,r.Wm)("span",null,[(0,r.Uk)("This is a message")])]})}},m={"utils-tooltip":(e,t)=>(0,r.Wm)("div",{class:[n.classes[g[t]],n.classes.toolTip]},[e])},d=(0,l.iH)(!1);let E;(function(e){e["input"]="shotcut-input",e["switch"]="shotcut-switch",e["textarea"]="shotcut-textarea",e["button"]="shotcut-button",e["text"]="shotcut-text",e["select"]="shotcut-select",e["radio"]="shotcut-radio",e["checkbox"]="shotcut-checkbox",e["upload"]="shotcut-upload"})(E||(E={}));const T=(()=>{const e=(0,l.qj)({formItemData:{},titleType:""}),t={input:(e,t,n,o)=>Object.assign({formElementLabel:e||"input",key:t,placeholder:n||"请输入"+e,formElementType:"input"},o?{format:o}:{}),select:(e,t,n,o)=>Object.assign({formElementLabel:e||"select",key:t,placeholder:"请选择",options:n,formElementType:"select"},o?{format:o}:{}),radios:(e,t,n)=>({formElementType:"radio",formElementLabel:e||"radio",key:t,childrenOptions:n})},n={formElementLabel:t.input("列名","formElementLabel"),key:t.input("主键","key"),placeholder:t.input("占位符","placeholder"),directives:t.input("指令","directives","请输入指令如sif=scope.state == 1 && scope.name == ''",(function(e){let t="";const n=/(?<!=)=(?!=)/;if(!e)return"";try{t=e.split(",").reduce(((e,t)=>{const o=t.split(n);if(!(0,h.VC)(o[0]))throw`未定义的指令${o[0]}`;return e.push([o[0],o[1]]),e}),[])}catch(o){console.error("quick-form 表单指令格式错误",o),t=""}return t})),children:t.input("子属性","children","请输入子属性多个属性用逗号隔开",(function(e){return e.split(",")})),defaultValue:t.input("默认值","defaultValue"),type:t.input("元素类型","type"),textValue:t.input("默认值","textValue"),options:t.input("选项设置","options","请输入选项如；label=男&value=0,label=女&value=1",(function(e){try{return e.split(",").reduce(((e,t)=>{const n=t.split("&").reduce(((e,t)=>{const n=t.split("=");return e[n[0]]=n[1],e}),{});return e.push(n),e}),[])}catch(t){return console.error("quick-form 选项解析错误",t),[]}})),childrenOptions:t.input("选项设置","childrenOptions","请输入选项如；label=男&value=0,label=女&value=1",(function(e){try{return e.split(",").reduce(((e,t)=>{const n=t.split("&").reduce(((e,t)=>{const n=t.split("=");return"label"==n[0]?e.children=[n[1]]:"value"==n[0]&&(e.label=n[1]),e}),{});return e.push(n),e}),[])}catch(t){return console.error("quick-form 选项解析错误",t),[]}})),action:t.input("请求 URL","action","请填写请求URL，如果手动填写#"),multiple:t.radios("","multiple",[{label:!1,children:["单选"]},{label:!0,children:["多选"]}]),listType:t.select("文件类型","listType",[{label:"text",value:"text"},{label:"picture",value:"picture"},{label:"picture-card",value:"picture-card"}])},o={"shotcut-switch":["formElementType:switch","formElementLabel","key"],"shotcut-input":["formElementType:input","formElementLabel","key","placeholder","directives","defaultValue"],"shotcut-textarea":["formElementType:input:textarea","formElementLabel","key","placeholder","directives","defaultValue"],"shotcut-button":["formElementType:button","formElementLabel","type","children","directives"],"shotcut-text":["formElementType:text","formElementLabel","textValue","directives"],"shotcut-select":["clearable:true","formElementType:select","formElementLabel","key","options","defaultValue","multiple","directives"],"shotcut-radio":["formElementType:radio","formElementLabel","key","childrenOptions","defaultValue","directives"],"shotcut-checkbox":["formElementType:checkbox","formElementLabel","key-array","childrenOptions","defaultValue","directives"],"shotcut-upload":["formElementType:upload","formElementLabel","key-array","directives","action:#","multiple:true","defaultValue:false","autoUpload:false","listType","listType:text"]};let r={},a={};const i=t=>{const o=e=>"true"==e||"false"!=e&&e;return t.map((t=>{const l=t.split(":"),i=t.split("-");if(2==i.length){const t=i[1],o=i[0];return a[o]=t,e.formItemData[o]="",n[o]}if(2==l.length)return e.formItemData[l[0]]=o(l[1]),{};if(3==l.length)return e.formItemData[l[0]]=`${l[1]}:${l[2]}`,{};if(e.formItemData[t]="",t in n){const e=n[t];return"format"in e&&(r[e.key]=e.format),n[t]}}))},_=e=>JSON.parse(JSON.stringify(e)),s=()=>_(e.formItemData),c=()=>{d.value=!1,p=null,f("user cancel"),e.formItemData={},r={}},u=(e,t)=>{const n=e.formElementType;T.genConifgForm(E[n],e).then((t=>{Object.keys(t).forEach((n=>{e[n]=t[n]}))}))};let p=null,m=null,f=null;return{parseCurrentFormOptions:u,getCurrentKeyTypes:e=>a[e],clearCurrentKeyTypes:()=>a={},genConifgForm(t,n){if(n)e.formItemData=_(n);else{p=t,e.titleType=p;const n=i(o[p]);R.formOptions=n}return d.value=!0,new Promise(((e,t)=>{m=e,f=t}))},submitFormItem(){const e=s();Object.keys(e).forEach((t=>{r[t]&&(e[t]=r[t](e[t]))})),m(e),c()},cancel:c,getFormState(){return e.formItemData},getTitleType:()=>e.titleType}})();let O="";const M={viewType:"",elementType:"",componentName:""},b=(0,l.iH)([]),k=e=>t=>e(t?.target,t),P=(()=>{let e=null;return{setOver:k(((t,n)=>{t&&(e=t,t.classList.add(D))})),setDefault:k(((t,n)=>{t&&t.classList.remove(D),e&&e.classList.remove(D)}))}})(),C=(()=>{const e={},t={},n={},o={};let r=[];const l=(e,t,n,o)=>{const r=`${t}-${n}`,l=[],a=null;return{viewType:e,elementType:t,componentName:r,children:l,target:a,title:o}},_=e=>e?n[e]:n,s=(e,t)=>{let o=null,r=0;o=setInterval((()=>{20==r&&clearInterval(o),t.el?(n[e].target=t.el,clearInterval(o)):r++}),50)},c=(e,t)=>new Promise(((r,l)=>{try{const l=o[e],a=o[t],i=n[l].children,_=n[a].children,s=i.findIndex((t=>t.componentName==e)),c=_.findIndex((e=>e.componentName==t)),u=i.splice(s,1,_[c]);_.splice(c,1,u[0]),o[e]=a,o[t]=l,r(1)}catch(a){l(0)}})),u=e=>({render:()=>e.map((e=>"shotcut"==e.viewType?a[e.elementType](e,e.title?e.title:e.componentName,e.children):"component"==e.viewType?i[e.elementType](e,e.title?e.title:e.componentName,e.children):void 0))}),p=e=>{if(!e)return"";const t=[],n=e.viewType,o=e.elementType;e.option;return"component"==n?i[o](e,e.title,e.children.map((e=>p(e)))):"utils"==n?m[o]("请首先放置容器元素","warn"):t},d=e=>(d.cachce=t[e],{...t[e],...u(t[e])}),E=(e,o)=>{if(o in n){delete n[o];const r=t[e].findIndex((e=>e.componentName==o));if(-1==r)return;t[e].splice(r,1)}};class f{constructor(e){Object.keys(e).forEach((t=>this[t]=e[t]))}setPosition(e){const t=this;e||(e="page");const n=t.componentName;return o[n]=e,this}}const h=(o,a,i)=>{let _={};if(r.indexOf(o)>=0){e[o]++;const r=e[o],s=l(o,a,r,i);t[o].push(s),n[s.componentName]=_=new f(s)}return _},y=n=>(r=n,n.forEach((n=>{t[n]=[],e[n]=0})),{register:h,getInfos:d,setEl:s,getRegisterInfo:_,renderVNodeFromElementInfo:p,remove:E,swap:c});return{init:y}})(),L=C.init(["component","container","shotcut"]),I=(()=>(t,n,o)=>{const r=(e,t)=>function(e){t.call(this,e)},l=(e,t)=>r(e,t),a=l("drag",(e=>{o&&(O=o),e.stopPropagation()})),i=l("dragleave",(e=>(P.setDefault(),e.stopPropagation(),e.preventDefault()))),_=l("dragover",(e=>{if(!(o&&o?.indexOf("shotcut")>=0)){if(M.componentName=o||"",M.elementType=t,M.viewType=n,o){const e=L.getRegisterInfo(o);P.setOver({target:e.target})}return e.stopPropagation(),e.preventDefault()}})),u=l("mousemove",(e=>{})),p=l("drop",(n=>{if("container"==M.viewType){if(!O)return;const e=L.getRegisterInfo(O);"shotcut"==e.viewType&&("shotcut-view"!==e.elementType?b.value={viewType:"utils",elementType:"utils-tooltip",option:{title:"请首先放置容器",type:"warn"}}:b.value=L.register("component",t).setPosition())}else{const t=L.getRegisterInfo(M.componentName),n=L.getRegisterInfo(O);"shotcut"==n.viewType?"shotcut-view"==n.elementType?(t.children.push(L.register("component","container-view").setPosition(t.componentName)),e.$forceUpdate()):T.genConifgForm(n.elementType).then((e=>{if(console.log(e),e.key){const n=T.getCurrentKeyTypes("key");c[t.componentName][e.key]="array"==n?e.defaultValue?e.defaultValue.split(","):[]:e.defaultValue}window.FormQuickDataLib=c,s[t.componentName].formOptions.push(e)})).catch((e=>{console.log(e)})):L.swap(O,M.componentName).then((()=>{e.$forceUpdate()})).catch((()=>{console.log("交换失败， 不要与根节点交换")}))}return P.setDefault(),M.componentName="",M.elementType="",M.viewType="",n.stopPropagation(),n.preventDefault()}));return{drag:a,dragleave:i,dragover:_,drop:p,mousemove:u}})();let U=!1;const w=e=>(!U&&e.forEach((e=>{L.register("shotcut",e.elementType,e.title)})),U=!0,L.getInfos("shotcut").render()),W=I("container-view","container"),R=(0,l.qj)({formOptions:[],layout:{labelWidth:100,size:"default",labelPosition:"right"}}),x=()=>{Object.keys(s).forEach((e=>{s[e].drag=!s[e].drag}))};return function(){return e=this,(0,r.Wm)("div",{class:t.dragLayout},[(0,r.Wm)("div",{class:t.dragTitle},[(0,r.Uk)("拖拽布局"),(0,r.Wm)((0,r.up)("el-button"),{style:"float: right",onClick:x,size:"small",type:"primary"},{default:()=>[(0,r.Uk)("开始/结束编辑")]})]),(0,r.Wm)("div",{class:t.dragIntro},[(0,r.Wm)("p",null,[(0,r.Uk)("使用説明:"),(0,r.Wm)("br",null,null),(0,r.Uk)("①创建表单之前需要首先进行页面布局"),(0,r.Wm)("br",null,null),(0,r.Uk)("②拖拽表单元素到布局好的容器中 "),(0,r.Wm)("br",null,null),(0,r.Uk)("③设置表单元素属性 "),(0,r.Wm)("br",null,null),(0,r.Uk)("④表单元素创建完成")]),(0,r.Wm)("p",null,[(0,r.Uk)("如何布局： "),(0,r.Wm)("br",null,null),(0,r.Uk)("1 拖动【容器】到空白页面 创建根节点 "),(0,r.Wm)("br",null,null),(0,r.Uk)("2 拖动【容器】到空白页面创建好的【容器视图】中， 创建子布局"),(0,r.Wm)("br",null,null),(0,r.Uk)("3 拖动【容器】到空白页面创建好的【容器视图】中， 如果该【容器视图】已经有创建好的子【容器视图】那么该【容器】（拖动中的【容器】）将被创建为兄弟【容器视图】")]),(0,r.Wm)("p",null,[(0,r.Uk)("如何创建表单："),(0,r.Wm)("br",null,null),(0,r.Uk)("1 拖动表单元素（目前除了容器 都属于表单元素）至 【最上层视图】（最上层视图带有标题）中"),(0,r.Wm)("br",null,null),(0,r.Uk)("2 出现配置表单元素的弹窗"),(0,r.Wm)("br",null,null),(0,r.Uk)("3 点击确定 创建完成 点击取消 创建取消")]),(0,r.Wm)("p",null,[(0,r.Uk)("主要表单属性解释："),(0,r.Wm)("br",null,null),(0,r.Uk)("1 列名 表单的列名 "),(0,r.Wm)("br",null,null),(0,r.Uk)('2 主键 该列名对应的key 如 列名为 “姓名” 主键为 "name"'),(0,r.Wm)("br",null,null),(0,r.Uk)('3 指令 目前支持的指令为 sif （控制该列的显示与隐藏）格式为 【指令】=【表达式】 如： sif = scope.state == 1 && scope.name !== ""。 scope.name 格式为【固定字段】.【主键】')])]),(0,r.Wm)("div",{class:t.dragContent},[(0,r.Wm)("div",{class:[t.toolbar,"reset__scrollbar"]},[w([{elementType:"shotcut-view",title:"容器"},{elementType:"shotcut-input",title:"输入"},{elementType:"shotcut-button",title:"按钮"},{elementType:"shotcut-text",title:"文本"},{elementType:"shotcut-select",title:"选择"},{elementType:"shotcut-radio",title:"单选"},{elementType:"shotcut-checkbox",title:"多选"},{elementType:"shotcut-textarea",title:"文本域"},{elementType:"shotcut-upload",title:"上传"},{elementType:"shotcut-switch",title:"开关"}])]),(0,r.Wm)("div",{draggable:"false",class:t.dragView,onDrop:W.drop,onDragover:W.dragover},[[L.renderVNodeFromElementInfo(b.value)]])]),(0,r.Wm)((0,r.up)("el-dialog"),{modelValue:d.value,title:T.getTitleType()+"类型设置",showClose:!1,beforeClose:T.cancel,width:"600px"},{default:()=>[(0,r.Wm)((0,r.up)("quick-form"),{ref:"configQuickForm",quickOptions:R,"form-data":T.getFormState()},null),(0,r.Wm)("div",{style:"text-align: right"},[(0,r.Wm)((0,r.up)("el-button"),{type:"warning",size:"small",onClick:T.cancel},{default:()=>[(0,r.Uk)("取消")]}),(0,r.Wm)((0,r.up)("el-button"),{type:"primary",size:"small",onClick:T.submitFormItem},{default:()=>[(0,r.Uk)("保存")]})])]})])}}});const O={quickWrap:{width:"1400px",margin:"0 auto"},quickContentSubTitle:{textAlign:"center",fontSize:"20px",color:"#fff",paddingTop:"40px"},controll_warp:{textAlign:"right"}};var M=(0,r.aZ)({setup(){const{classes:e}=window._createStyleSheet(O),t=e=>`\n      FromData.value = {\n        account: "",\n        bankType: null,\n        othersAccount: "",\n        amount: 0,\n        remark: 1111,\n        date: "2022-05-25",\n        timeData: new Date(2000, 1, 1, 12, 0, 0),\n        daterangeData: ["2022-05-01", "2022-05-05"],\n        state: 2,\n        checkboxData: [2],\n        fileList: [],\n        switchData: false,\n      };\n      QuickForm=${e}\n      `,n=function(e,t){return`\n      FromData.value = {\n        account: "",\n        bankType: null,\n        othersAccount: "",\n        amount: 0,\n        remark: 1111,\n        date: "2022-05-25",\n        timeData: new Date(2000, 1, 1, 12, 0, 0),\n        daterangeData: ["2022-05-01", "2022-05-05"],\n        state: 2,\n        checkboxData: [2],\n        fileList: [],\n        switchData: false,\n      };\n      QuickForm = {\n        formOptions: [\n            {\n        formElementLabel: "开户行",\n        formElementType: "select",\n        key: "bankType",\n        placeholder: "请选择银行",\n        options: [\n          { label: "中国银行", value: 1 },\n          { label: "建设银行", value: 2 },\n          { label: "农业银行", value: 3 },\n          { label: "建设银行", value: 4 },\n        ],\n      },\n      {\n        tirrgerEvents: ["mouseover"],\n        formElementLabel: "账号：",\n        formElementType: "input",\n        key: "account",\n        placeholder: "请填写银行账号",\n      },\n      {\n        formElementLabel: "对方账号：",\n        formElementType: "input",\n        key: "othersAccount",\n        placeholder: "请填写对方账号",\n      },\n      {\n        formElementLabel: "转账金额：",\n        // formElementType: "container", // 如果没有第一层级的 type 那么默认是container\n        childrenOptions: [\n          {\n            formElementType: "input:number",\n            key: "amount", // mountModelValue: "amount", mountModelValue 绑定优先级大于 key\n          },\n          {\n            formElementType: "text",\n            textValue: "元",\n            style: "margin-left: 10px; color:red",\n          },\n        ],\n      },\n      {\n        formElementLabel: "备注",\n        formElementType: "input:textarea",\n        placeholder: "请填写备注",\n        key: "remark",\n      },\n      {\n        formElementLabel: "到账类型",\n        formElementType: "radio",\n        key: "state",\n        childrenOptions: [\n          { label: 1, children: ["立即"] },\n          { label: 2, children: ["延时"] },\n        ],\n      },\n      {\n        formElementLabel: "日期",\n        directives: [["sif", "scope.state == 2"]],\n        childrenOptions: [\n          {\n            formElementType: "date",\n            key: "date",\n            type: "date",\n            placeholder: "预约日期",\n            format: "YYYY/MM/DD",\n            valueFormat: "YYYY-MM-DD",\n          },\n          {\n            formElementType: "time",\n            key: "timeData",\n            type: "time",\n            placeholder: "时间",\n          },\n        ],\n      },\n      {\n        formElementLabel: "日期",\n        formElementType: "text",\n        textValue: "{{date}}   {{timeData}}",\n      },\n      {\n        formElementLabel: "通知类型",\n        formElementType: "checkbox",\n        key: "checkboxData",\n        childrenOptions: [\n          { label: 1, children: ["电话通知"] },\n          { label: 2, children: ["短信通知"] },\n          { label: 3, children: ["邮件通知"] },\n        ],\n      },\n      {\n        formElementLabel: "上传凭证",\n        formElementType: "upload",\n        key: "fileList",\n        action: "#",\n        listType: "picture-card",\n        autoUpload: false,\n        children: [\n          {\n            formElementType: "icon",\n            children: ['上传']\n          },\n        ],\n      },\n      {\n        formElementLabel: "开关",\n        formElementType: "switch",\n        key: "switchData"\n      }\n        ],\n        layout: {\n      labelWidth: 100,\n      size: "default",\n      labelPosition: "right",\n    },\n        drag: ${e},\n        edit: ${t}\n      };\n      \n      `},o=((0,r.FN)(),(0,l.qj)({RefCode:n(!1,!1),inputCode:'\n        FromData.value = {\n          inputValue1: "",\n          inputValue1: 0,\n          inputValue2: "",\n        };\n        QuickForm = {\n          formOptions: [\n            {\n              formElementLabel: "text",\n              formElementType: "input",\n              key: "inputValue",\n              placeholder: "placeholder",\n            },\n            {\n              formElementLabel: "number",\n              formElementType: "input:number",\n              key: "inputValue1",\n              placeholder: "placeholder",\n            },\n            {\n              formElementLabel: "textarea",\n              formElementType: "input:textarea",\n              key: "inputValue2",\n              placeholder: "placeholder",\n            },\n            {\n              formElementLabel: "maxlengh",\n              formElementType: "input:textarea",\n              key: "inputValue2",\n              maxlength:"100",\n              showWordLimit: true,\n              placeholder: "placeholder",\n            },\n          ],\n          layout: {\n            labelWidth: 100,\n            size: "default",\n            labelPosition: "right",\n          }\n        }\n      ',btnCode:'\n      QuickForm = {\n        formOptions: [\n          {\n            formElementType: "button",\n            formElementLabel: "默认按钮：",\n            childrenOptions: [\n              {\n                formElementType: "button",\n                children: ["default"]\n              },\n              {\n                formElementType: "button",\n                type:"primary",\n                children: ["primary"]\n              },\n              {\n                formElementType: "button",\n                type:"success",\n                children: ["success"]\n              },\n              {\n                formElementType: "button",\n                type: "info",\n                children: ["info"]\n              },\n              {\n                formElementType: "button",\n                type: "danger",\n                children: ["danger"]\n              },\n            ],\n          },\n          {\n            formElementType: "button",\n            formElementLabel: "圆角按钮：",\n            childrenOptions: [\n              {\n                formElementType: "button",\n                children: ["default"],\n                round: true\n              },\n              {\n                formElementType: "button",\n                type:"primary",\n                children: ["primary"],\n                round: true\n              },\n              {\n                formElementType: "button",\n                type:"success",\n                children: ["success"],\n                round: true\n              },\n              {\n                formElementType: "button",\n                type: "info",\n                children: ["info"],\n                round: true\n              },\n              {\n                formElementType: "button",\n                type: "danger",\n                children: ["danger"],\n                round: true\n              },\n            ],\n          }\n        ],\n        layout: {\n          labelWidth: 100,\n          size: "default",\n          labelPosition: "right",\n        },\n      }',checkboxOrRadioCode:'\n      FromData.value = {\n        radio: 1,\n        checkboxValue: []\n      };\n      QuickForm = {\n        formOptions: [\n          {\n            formElementLabel: "单选",\n            formElementType: "radio",\n            key: "radio",\n            childrenOptions: [\n              { label: 1, children: ["选项1"]},\n              { label: 2, children: ["选项2"]},\n            ]\n          },\n          {\n            formElementLabel: "多选",\n            formElementType: "checkbox",\n            key: "checkboxValue",\n            childrenOptions: [\n              { label: 1, children: ["选项1"]},\n              { label: 2, children: ["选项2"]},\n              { label: 3, children: ["选项3"]},\n              { label: 4, children: ["选项4"]},\n            ]\n          },\n\n        ],\n        layout: {\n          labelWidth: 100,\n          size: "default",\n          labelPosition: "right",\n        },\n      }\n      ',selectCode:'\n      FromData.value = {\n        selectValue: "",\n        multipleSelectValues: []\n      };\n      QuickForm = {\n        formOptions: [\n          {\n            formElementLabel: "单选",\n            formElementType: "select",\n            key: "selectValue",\n            placeholder: "请选择",\n            options: [\n              { label: "选项1", value: 1 },\n              { label: "选项2", value: 2 },\n              { label: "选项3", value: 3 },\n              { label: "选项4", value: 4 },\n            ],\n          },\n          {\n            formElementLabel: "多选",\n            formElementType: "select",\n            key: "multipleSelectValues",\n            multiple: true,\n            placeholder: "请选择",\n            options: [\n              { label: "选项1", value: 1 },\n              { label: "选项2", value: 2 },\n              { label: "选项3", value: 3 },\n              { label: "选项4", value: 4 },\n            ],\n          }\n        ],\n        layout: {\n          labelWidth: 100,\n          size: "default",\n          labelPosition: "right",\n        }\n      }\n      ',dragDemo:n(!1,!1),dragCompilte:!1}));let a="";const _={toDrag:()=>{o.dragCompilte=!0,o.dragDemo=n(!0,!1)},compilte:()=>{o.dragDemo=a,o.dragCompilte=!1},codeChange(e){a=JSON.parse(e),a.drag=!1,a=t(JSON.stringify(a))},edit(){console.log("编辑表单"),o.dragDemo=n(!1,!0)}};return()=>(0,r.Wm)("div",{class:e.quickWrap},[(0,r.Wm)(i,null,null),(0,r.Wm)(E,{height:300,code:o.inputCode,title:"--简单的使用input--"},null),(0,r.Wm)(E,{height:300,code:o.selectCode,title:"--简单的使用select--"},null),(0,r.Wm)(E,{height:250,code:o.btnCode,title:"--简单的使用button--"},null),(0,r.Wm)(E,{height:450,code:o.checkboxOrRadioCode,title:"--简单的使用radio/checkbox--"},null),(0,r.Wm)(E,{height:800,code:o.RefCode,title:"--较完整的例子--"},null),(0,r.Wm)(E,{height:800,code:o.dragDemo,title:"--可拖拽的例子--",ref:"dragView",onCodeChange:_.codeChange},{default:()=>[(0,r.Wm)("div",{class:e.controll_warp},[[o.dragCompilte?(0,r.Wm)((0,r.up)("el-button"),{type:"primary",onClick:_.compilte},{default:()=>[(0,r.Uk)("拖拽完成")]}):(0,r.Wm)((0,r.up)("el-button"),{type:"primary",onClick:_.toDrag},{default:()=>[(0,r.Uk)("拖拽表单")]}),(0,r.Wm)((0,r.up)("el-button"),{type:"primary",onClick:_.edit},{default:()=>[(0,r.Uk)("编辑表单")]})]])]}),(0,r.Wm)(T,null,null)])}}),b=n(5431);(0,b.z)("/quick-form-example/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var k=n(2859),P=(n(4415),n(456)),C=n(1958),L=n(2584);function I(){return P.ZP.setup((0,C.Z)()),{install(e){window._createStyleSheet=e.config.globalProperties=e=>P.ZP.createStyleSheet(e).attach()}}}(0,o.ri)(M).use(I()).use(L.Z).use(k.ZP).mount("#app")},4522:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3396),vue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4870);__webpack_exports__["Z"]=(0,vue__WEBPACK_IMPORTED_MODULE_0__.aZ)({props:{code:String,height:Number},emits:["codeChange"],setup(props,{emit:emit}){const{code:code,height:height}=(0,vue__WEBPACK_IMPORTED_MODULE_1__.BK)(props),FromData=(0,vue__WEBPACK_IMPORTED_MODULE_1__.iH)({});let QuickForm={};const parserClasses={quickParser:{width:"800px",height:height.value+"px",display:"inline-block",float:"right",padding:"20px 0",background:"#fff",boxSizing:"border-box"}},FormEvent=e=>{"optionChange"==e.type&&emit("codeChange",e.val.currentOptions)},FormChange=e=>{console.log("change",e)},{classes:classes}=window._createStyleSheet(parserClasses),upDateQuickElement=()=>{FromData.value={},QuickForm={},eval(code.value)};return upDateQuickElement(),(0,vue__WEBPACK_IMPORTED_MODULE_0__.YP)(code,upDateQuickElement),function(){return(0,vue__WEBPACK_IMPORTED_MODULE_0__.Wm)("div",{class:classes.quickParser},[(0,vue__WEBPACK_IMPORTED_MODULE_0__.Wm)((0,vue__WEBPACK_IMPORTED_MODULE_0__.up)("quick-form"),{"form-data":FromData.value,quickOptions:QuickForm,onFormEvent:FormEvent,onFormChange:FormChange},null)])}}})},6579:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{VC:function(){return HasDirective},XX:function(){return QuickForm}});var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6699),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__),_utils_directives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4632),vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3396),element_plus__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8631),element_plus__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8365),element_plus__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1088),element_plus__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9523),element_plus__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1015),element_plus__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(9667),element_plus__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9969),element_plus__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(300),element_plus__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(3417),element_plus__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(438),element_plus__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(5791),element_plus__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(7188),_element_plus_icons_vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2748);let _app=null;const _EVENT_="formChange",_FROM_EVENT_="formEvent",EVENT_CHANGE="change",TEXT_EL="span",FROM_INS="_quickFrom",FROM_C="quick-form__label--container",FROM_C_EL="div",FORM_EL_IMG="img",HandleProps=["children","options","directives","formElementType","formElementLabel","key","tirrgerEvents","textValue","currentPropPath","itemStyle","preventDefaultEvent","component","slotOptions","optionLabelKey","optionValueKey","mainType","subType","mountModelValue","showControll","childrenOptions"],TemplateReg=/\{\{.*?\}\}/g,emitVal=e=>(t,n)=>(o,r={})=>{e.$emit(_EVENT_,{type:t,key:n,val:o,...r})},emitEvent=e=>(t,n)=>o=>{e.$emit(_FROM_EVENT_,{type:t,key:n,val:o})},Throttling=function(e,t){let n=null;return function(...o){let r;n&&clearTimeout(n),n=setTimeout((()=>{t.apply(r,o),clearTimeout(n)}),e)}},VnodeImg={props:{imgOption:{type:Object,default:()=>({})},imgData:{type:Object,default:()=>({})},imgControll:{type:Array,default:()=>[]},showControll:{type:Boolean,default:!0},currentIndex:{type:Number,default:null}},render(){const e=this,t=e.imgOption,n=e.imgControll,o=e.showControll,r=e.currentIndex,l={preview:()=>ElementCreator.icon({children:[_element_plus_icons_vue__WEBPACK_IMPORTED_MODULE_2__.Gq5],..._,onClick:s("preview")}),download:()=>ElementCreator.icon({children:[_element_plus_icons_vue__WEBPACK_IMPORTED_MODULE_2__.UWx],..._,onClick:s("download")}),delete:()=>ElementCreator.icon({children:[_element_plus_icons_vue__WEBPACK_IMPORTED_MODULE_2__.HG3],..._,onClick:s("delete")})},a=()=>Array.isArray(n)?n.map((e=>e in l?l[e]():"")):[],i=()=>(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(FORM_EL_IMG,{src:e.imgData.url,height:100,...t,class:"quick-form__imglist--item"}),_={size:16,color:"#fff"},s=t=>()=>{e.$emit("imgEvent",t,r)},c=()=>(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(FROM_C_EL,{class:"quick-form__imglist--itemModal"},a());let u=null;return u=(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(FROM_C_EL,{class:"quick-form__imglist--itemwarp",style:"height: 100px"},o&&n.length>0?[i(),c()]:[i()]),u}},VnodeImgList={props:{listOption:{type:Object,default:()=>({})},imgList:{type:Array,default:()=>[]}},render(){const e=this,t=e.listOption;let n=e.imgList;Array.isArray(n)||(n=[],console.error("传入的图片数据结构不是个数组！"));const o=function(t,n){e.$emit(t,n)};return(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(FROM_C_EL,{class:FROM_C},n.map?n.map(((e,n)=>(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(VnodeImg,{imgData:e,imgOption:t.itemStyle||{},imgControll:t.controll,showControll:"boolean"!=typeof t.showControll||t.showControll,currentIndex:n,onImgEvent:o}))):[])}},ElementCreator={switch:(e,t)=>{t.emit("change",e.key);const n=t.clearHandleProps(e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_4__.OX,{...n,...t.createEventMap(e,t),modelValue:t.getModelValue(e)}),e,t)},time:(e,t)=>{const n=t.emit("change",e.key),o=t.clearHandleProps(e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_5__.ah,{...o,...t.createEventMap(e,t),modelValue:t.getModelValue(e),"onUpdate:modelValue":Throttling(50,(function(o){t.upDateFromData(o,e.mountModelValue||e.key),n(o)}))}),e,t)},date:(e,t)=>{const n=t.clearHandleProps(e),o=t.emit("change",e.key);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_6__.i,{...n,...t.createEventMap(e,t),modelValue:t.getModelValue(e),"onUpdate:modelValue":Throttling(50,(function(n){t.upDateFromData(n,e.mountModelValue||e.key),o(n)}))}),e,t)},imgList:(e,t)=>{const n=t.emitEvent("formEvent",e.formElementType);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(VnodeImgList,{imgList:t.GetParentModelVal(e.currentPropPath),listOption:e,...e,onPreview:function(t){n({type:"preview",key:e.key,index:t})},onDelete:function(t){n({type:"delete",key:e.key,index:t})},onDownload:function(t){n({type:"download",key:e.key,index:t})}}),e,t)},upload:(e,t)=>{const n="detail"==e.subType,o=t.clearHandleProps(e);let r=e.accept;r&&Array.isArray(r)&&(delete e.accept,r=r.join(","));const l=function(e){const n=e.mountModelValue||e.key,{name:o,url:r}=e.alias||{name:"name",url:"url"};(t.scope.formData[n]||[]).forEach((e=>{"name"in e&&"url"in e||(e.name=e[o],e.url=e[r])}));const l=()=>{if(!(n in t.scope.formData))return console.warn("invalid depend key "+n),[];try{return t.scope.formData[n]}catch(e){return console.warn("invalid depend key "+n),[]}};return{fileList:l()}},a=n?{class:"quick-form__upload--detail",...l(e),...t.createEventMap(e,t)}:{...t.createEventMap(e,t),...l(e),...o};return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_7__.LW,{onHttpRequest:e=>{console.log(e)},...a,accept:r},(()=>n?[]:t.createElementDeep(e))),e,t)},icon:e=>{let t=[];const n=ClearHandleProps(e);try{t=(e.children||[]).map((e=>(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(e)))}catch(o){t=[]}return(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_8__.gn,{...n},(()=>t))},text:(e,t)=>{let n,o;t&&t.getModelValue&&(n=t&&t.getModelValue(e),o=t.createEventMap(e,t));const r=t.clearHandleProps(e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(TEXT_EL,{...o,...r},[t.parseTempSyntax(e.textValue)||n||""]),e,t)},container:(e,t)=>{const n=t.clearHandleProps(e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)("div",{...t.createEventMap(e,t),...n},t.createElementDeep(e)),e,t)},inputNumber:(e,t)=>t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_9__.d6,{modelValue:t.getModelValue(e),...t.createEventMap(e,t),...e}),e),radio:(e,t)=>{const n=e.children;return delete e.children,t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_10__.rh,{modelValue:t.getModelValue(e),onClick:Throttling(50,(()=>{t.upDateFromData(e.label,e.mountModelValue||e.key)})),...e},(()=>n)),e,t)},checkbox:(e,t)=>{const n=e.children;return delete e.children,t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_11__.Xb,{modelValue:!!Array.isArray(t.getModelValue(e))&&t.getModelValue(e).indexOf(e.label)>=0,onClick:Throttling(50,(function(){const n=t.getModelValue(e),o=n.indexOf(e.label);o>=0?n.splice(o,1):n.push(e.label)})),...e},(()=>n)),e,t)},input:(e,t)=>{if("number"==e.subType)return ElementCreator.inputNumber(e,t);const n=t.clearHandleProps(e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_12__.EZ,{modelValue:t.getModelValue(e),...t.createEventMap(e,t),placeholder:e.placeholder,type:e.subType?e.subType:"text",...n}),e,t)},select:(e,t)=>{const n=t.clearHandleProps(e),o=e.options,r=[],l=e.optionLabelKey||"label",a=e.optionValueKey||"value",i=(e=[])=>{(e||[]).forEach((e=>{const t=(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_13__.BT,{value:e[a],label:e[l]});r.push(t)}))};return i(t.getComponentDeps(o)),t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_13__.km,{modelValue:t.getModelValue(e),...t.createEventMap(e,t),...n},(()=>r)),e,t)},button:(e,t)=>{const n=t.clearHandleProps(e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_14__.mi,{...n,onClick:()=>t.emitEvent("formEvent",e.key)()},(()=>t.createElementDeep(e))),e,t)},formFrame:(e,t,n)=>{const o=[];let r,l=null;n?(l=n.containerVnode,r=n.itemVnode):l=element_plus__WEBPACK_IMPORTED_MODULE_15__.ly;const a=t.GetLayout();return e.forEach(((e,n)=>{o.push(ElementCreator.formItemFrame(e,t,n,r))})),(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(l,{rules:t.scope.rules,model:t.scope.formData,ref:FROM_INS,...a},r?o:()=>0==o.length?(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)("div",{class:"quick-form__state--align--center quick-form__fc--light"},["请设置表单元素"]):o)},formItemFrame:(e,t,n,o)=>{if(!e.formElementType)return"";const r=e.formElementType||"container",l=e.formElementLabel,a=e.key,i=t.GetCombinationType(r);if("slot"==i.mainType){if(!i.subType||!(i.subType in ElementCreator))return!i.subType&&e.component?t.renderComponents(e):ElementCreator.container({children:[i.subType?"无法找到插槽："+i.subType:"请传入自定义组件"]},t);ElementCreator[i.subType](e,t)}const _=(e,t,n)=>{if(e in ElementCreator){const o=[],r=t.childrenOptions;return Array.isArray(r)&&"text"!==e?(delete t.childrenOptions,r.forEach((r=>{const l=r.formElementType?n.GetCombinationType(r.formElementType):{};r.formElementType&&(e=l.mainType),o.push(ElementCreator[e]({key:t.key,...r,...l},n))})),o):[ElementCreator[e]({...t,...i},n)]}return[]},s=t.clearHandleProps(e),c=(e,t)=>(Object.keys(t).forEach((n=>{"class"==n&&(e[n]=(e[n]||"")+` ${t[n]}`)})),e);return t.parseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(o||element_plus__WEBPACK_IMPORTED_MODULE_15__.nH,c({...mountDrag(t,n),prop:a,label:t.parseTempSyntax(l),...s},{class:`${t.GetDrag()?"el-form-item__drag":""} ${t.GetEditOption()?"el-form-item__edit":""}`}),o?[_(i.mainType,{...e,...i},t)]:()=>[_(i.mainType,{...e,...i},t),t.GetEditOption()?(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)("div",{class:"edit__tools"},[(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_14__.mi,{type:"danger",size:"small",onClick(){t.emitEvent("formEvent","")({type:"delete_option",resouce:t.scope.quickOptions.formOptions,value:e,pos:n})}},(()=>["删除"])),(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(element_plus__WEBPACK_IMPORTED_MODULE_14__.mi,{type:"primary",size:"small",onClick(){t.emitEvent("formEvent","")({type:"edit_option",resouce:t.scope.quickOptions.formOptions,value:e,pos:n})}},(()=>["编辑"]))]):""]),e,t)}},mountDrag=(()=>{let e=-1,t=-1,n=!1;const o="quick-form__state--drag_here",r=e=>{e.dataTransfer.dropEffect="move"};return(l,a)=>{const i=l.GetDrag(),_={style:""+(i?"position: relative":""),draggable:!0,onDrag:t=>(r(t),n=!0,e=a,t.preventDefault()),onDragover:e=>(r(e),e.target.classList.add(o),e.preventDefault()),ondragleave:e=>(e.target.classList.remove(o),!!n&&e.preventDefault()),onDrop:r=>{r.target.classList.remove(o),n=!1,t=a,l.positionChanger(e,t),e=-1,t=-1}},s={};return i?_:s}})(),UperHelper=e=>{const t=e.split(""),n=t.shift().toUpperCase();return`on${n}${t.join("")}`},ClearHandleProps=e=>{const t={};return Object.keys(e).forEach((n=>{HandleProps.includes(n)||(t[n]=e[n])})),t},eventMap=(()=>{const e=["input","change","blur","mouseover","mouseenter"];e.default="input";const t=["change"];t.default="change";const n=["click"];n.default="click";const o=["preview","remove","success","error","progress","change","exceed","upload","remove"];o.default="change";const r=["click","mouseover","mouseenter"];r.default="click";const l=["click","mouseover","mouseenter","change"];l.default="change";const a=["click","mouseover","mouseenter","change"];a.default="click";const i=["click","mouseover","mouseenter","change","blur","focus","calendarChange","panelChange","visibleChange"];i.default="change";const _=["click","mouseover","mouseenter","change","blur","focus","calendarChange","panelChange","visibleChange"];_.default="change";const s=["click","mouseover","mouseenter","change"];s.default="change";const c={input:e,select:t,text:n,upload:o,container:r,checkbox:l,radio:a,date:i,time:_,switch:s},u=(e,t)=>{if(e in c){if(Array.isArray(t)){const n=[],o=c[e].default,r={originalEvent:o,mountEvent:UperHelper(o)};return t.forEach((r=>{r!=o&&(c[e].includes(r)?n.push({originalEvent:r,mountEvent:UperHelper(r)}):console.warn("未在元素类型："+e+"找到："+t+"方法"))})),n.push(r),n}return c[e].default||console.warn("can not found default event in "+e),[{originalEvent:c[e].default,mountEvent:UperHelper(c[e].default)}]}return console.warn("未定义:"+e+"元素类型"),[]},p=e=>c[e]?.default;return{getEvents:u,getDefaultEvent:p}})(),Methods={methods:{getFrom(){const e=this;return e.$refs[FROM_INS]},addItem(e){const t=this;t.quickOptions.formOptions.push(e),t._updateComponents()},_updateComponents(){const e=this;e.$nextTick((()=>{e.$forceUpdate()}))},resetRules(e){const t=this,n="StateLib"+t._raw;if(n in window){const n=window["StateLib"+t._raw].getDeleteKey(),o=Object.keys(e).reduce(((t,o)=>(-1==n.indexOf(o)&&(t[o]=e[o]),t)),{});t.$emit("ruleChange",o)}return new Promise(((e,t)=>{setTimeout((()=>{e("")}),200)}))}}},_Data={data:()=>({_quickOptions:{},defaultValue:"未匹配到key",_raw:(new Date).getTime()})},Props={props:{formData:{type:Object,default:()=>({})},quickOptions:{type:Object,default:()=>({})},depOptions:{type:Object,default:()=>({})},rules:{type:Object,default:()=>({})}}},MountMainUtils=function(myThis){const _emitVal=emitVal(myThis),_emitEvent=emitEvent(myThis),_UTILS={},GetCombinationType=e=>{const t=e.split(":"),n=t[0],o=t[1];return{mainType:n,subType:o}},getModelValue=e=>{let t,n=null;return e?("string"==typeof e?n=e:(n=e.key,t=e.mountModelValue),t&&t in myThis.formData&&(n=t),n in myThis.formData?myThis.formData[n]:null):null},createEventMap=(e,t)=>{if(!e.formElementType)return{};const n=GetCombinationType(e.formElementType).mainType,o=eventMap.getEvents(n,e.tirrgerEvents),r={};return o.forEach((({mountEvent:o,originalEvent:l})=>{const a=_emitVal(l,e.key),i=eventMap.getDefaultEvent(n);r[o]=l==i?(n,o)=>{if(e.preventDefaultEvent||t.upDateFromData(n,e.mountModelValue||e.key),"select"==e.formElementType){const o=e.optionValueKey||"value",r=e.optionLabelKey||"label",l=e.redundantKeys||[],i=t.getComponentDeps(e.options).filter((e=>e[o]==n)).map((e=>({value:e[o],label:e[r],...l.reduce(((t,n)=>(t[n]=e[n],t)),{})})));return a(n,{option:i[0]})}a(n)}:a})),r},GetLayout=()=>myThis.quickOptions.layout,GetConfig=()=>myThis.quickOptions.conifg,GetDrag=()=>Boolean(myThis.quickOptions.drag),GetEditOption=()=>Boolean(myThis.quickOptions.edit),upDateFromData=(e,t)=>{if(t in myThis.formData){if(e instanceof Event)return;myThis.formData[t]=e}},getMountModelValue=e=>{const t={},n=e.mountModelValue;return"string"==typeof n&&(t[n]=myThis.formData[e.key]),t},createElementDeep=e=>{const t=e.children||[],n=e.key,o=[...e.currentPropPath||[],n],r=[];if(Array.isArray(t))return t.forEach((e=>{if("string"==typeof e)return r.push(ElementCreator.text({textValue:e},_UTILS));const t=e.formElementType;t in ElementCreator?(e.currentPropPath=o,r.push(ElementCreator[t]({...e,key:n},_UTILS))):console.warn("validate child option:"+JSON.stringify(e))})),r},GetParentModelVal=e=>{const t=e.shift(),n=getModelValue(t);return n==myThis.defaultValue&&console.warn("can not found parent prop "+t),n},ParseDirective=(vnode,options,utils)=>{const directives=options.directives;if(Array.isArray(directives)){const s=directives.map((ds=>{const directive=ds[0],QueryString="_UTILS.scope.formData",QueryDepString="_UTILS.scope.depOptions",condition=ds[1].replace(new RegExp("scope","g"),QueryString).replace(new RegExp("depScope","g"),QueryDepString);return[(0,vue__WEBPACK_IMPORTED_MODULE_3__.Q2)(directive),eval(condition),utils,options.key]}));vnode=(0,vue__WEBPACK_IMPORTED_MODULE_3__.wy)(vnode,s)}return vnode},RenderComponents=e=>{const t=e.slotOptions||{},n=t.props||[],o=t.receiver||[],r=n.reduce(((e,t,n)=>{try{e[t.prop]="self"==t.type?t.value:{..._UTILS.scope.formData,..._UTILS.scope.depOptions}[t.value]}catch(o){console.log(o)}return e}),{}),l=_UTILS.emitEvent("formEvent",e.formElementType),a=o.reduce(((t,n,o)=>(t[UperHelper(n)]=function(t){l({type:n,key:e.key,value:t})},t)),{});return ParseDirective((0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(e.component,{...r,...a}),e,_UTILS)},GetComponentDeps=e=>"string"==typeof e?e in myThis.depOptions?myThis.depOptions[e]:(console.warn("invalid depName:"+e),[]):Array.isArray(e)?e:void console.warn("invalid depName type:"+typeof e+", must be Array or String"),ParseTempSyntax=function(e){if("string"==typeof e){const t=e.match(TemplateReg);t&&t.length>0&&t.map((t=>{const n=t.replace("{{","").replace("}}",""),o=Object.assign({},_UTILS.scope.formData,_UTILS.scope.depOptions),r=o[n];e=e.replace(t,r)}))}return e},RulesState=(()=>{const e=[];return{resetState(t,n){const o=e.indexOf(t);n?o>=0&&e.splice(o,1):-1==o&&e.push(t)},getDeleteKey(){return e},resetRules(e){window["StateLib"+myThis._raw]=this}}})(),PositionChanger=function(e,t){const n=myThis.quickOptions.formOptions;if(e>=0&&t>=0&&e!==t){const o=n.splice(e,1)[0];e>t?n.splice(t,0,o):n.splice(t-1,0,o),_emitEvent("optionChange")({targetOption:o,start:e,end:t,currentOptions:JSON.stringify(_UTILS.getGlobalOptions())}),myThis.$forceUpdate()}};return _UTILS.scope=myThis,_UTILS.emit=_emitVal,_UTILS.getModelValue=getModelValue,_UTILS.eventMap=eventMap,_UTILS.createEventMap=createEventMap,_UTILS.GetCombinationType=GetCombinationType,_UTILS.GetLayout=GetLayout,_UTILS.GetConfig=GetConfig,_UTILS.GetDrag=GetDrag,_UTILS.GetEditOption=GetEditOption,_UTILS.upDateFromData=upDateFromData,_UTILS.getMountModelValue=getMountModelValue,_UTILS.createElementDeep=createElementDeep,_UTILS.GetParentModelVal=GetParentModelVal,_UTILS.emitEvent=_emitEvent,_UTILS.parseDirective=ParseDirective,_UTILS.renderComponents=RenderComponents,_UTILS.clearHandleProps=ClearHandleProps,_UTILS.getComponentDeps=GetComponentDeps,_UTILS.parseTempSyntax=ParseTempSyntax,_UTILS.rulesState=RulesState,_UTILS.positionChanger=PositionChanger,_UTILS.getGlobalOptions=()=>myThis.quickOptions,_UTILS},MainRender=function(){return{render(){const e=this,t=e.quickOptions.formOptions||[],n=e.quickOptions.config,o=(e.depOptions,MountMainUtils(e));let r=!1;n&&"hander"==n.renderType&&n.containerVnode&&n.itemVnode&&(r=!0);const l=ElementCreator.formFrame(t,o,r?n:void 0);return l}}},_QuickForm={...Props,..._Data,...Methods,..._utils_directives__WEBPACK_IMPORTED_MODULE_1__.Z,...MainRender()},QuickForm=function(e){return(0,vue__WEBPACK_IMPORTED_MODULE_3__.h)(_QuickForm,e)},HasDirective=e=>Boolean(_utils_directives__WEBPACK_IMPORTED_MODULE_1__.Z.directives[e]),mount=function(e){e.component("quick-form",_QuickForm),_app=e};var __WEBPACK_DEFAULT_EXPORT__={install:mount}},4632:function(e,t){const n="sif",o={directives:{[n]:{updated:(()=>{let e=null,t=null;return(o,r)=>{console.log(1111111111,o,r);const l=r.arg;if(!l)return;const a=o.style.display,i=r.modifiers;l.scope._rules;null==e&&(e=a),l.rulesState.resetState(i,r.value),l.scope.$nextTick((()=>{r.value?o.style.display=e:o.style.display="none"})),t&&clearTimeout(t),t=setTimeout((()=>{l.rulesState.resetRules(n)}),200)}})()}}};t["Z"]=o},4147:function(e){e.exports=JSON.parse('{"name":"quick-form-vue3","version":"0.2.7","private":false,"main":"build/index.js","scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","test:unit":"vue-cli-service test:unit","lint":"vue-cli-service lint","compile":"gulp compile","test":"jest --coverage"},"dependencies":{"core-js":"^3.8.3","gulp-uglify":"^3.0.2","monaco-editor":"^0.33.0","register-service-worker":"^1.7.2"},"peerDependencies":{"vue":">=3.2.0","element-plus":">=2.2.2"},"devDependencies":{"@types/jest":"^27.0.1","@typescript-eslint/eslint-plugin":"^5.4.0","@typescript-eslint/parser":"^5.4.0","@vue/cli-plugin-babel":"~5.0.0","@vue/cli-plugin-eslint":"~5.0.0","@vue/cli-plugin-pwa":"~5.0.0","@vue/cli-plugin-typescript":"~5.0.0","@vue/cli-plugin-unit-jest":"~5.0.0","@vue/cli-service":"~5.0.0","@vue/eslint-config-typescript":"^9.1.0","@vue/test-utils":"^2.0.0-0","@vue/vue3-jest":"^27.0.0-alpha.1","babel-jest":"^27.0.6","eslint":"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-vue":"^8.0.3","jest":"^27.0.5","lint-staged":"^11.1.2","prettier":"^2.4.1","sass":"^1.32.7","sass-loader":"^12.0.0","ts-jest":"^27.0.4","typescript":"~4.5.5","jss":"10.9.0","jss-preset-default":"10.9.0","gulp":"^4.0.2","gulp-babel":"^8.0.0","gulp-typescript":"^6.0.0-alpha.1","merge2":"^1.4.1","rimraf":"^3.0.2"},"gitHooks":{"pre-commit":"lint-staged"}}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,function(){__webpack_require__.amdO={}}(),function(){var e=[];__webpack_require__.O=function(t,n,o,r){if(!n){var l=1/0;for(s=0;s<e.length;s++){n=e[s][0],o=e[s][1],r=e[s][2];for(var a=!0,i=0;i<n.length;i++)(!1&r||l>=r)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](n[i])}))?n.splice(i--,1):(a=!1,r<l&&(l=r));if(a){e.splice(s--,1);var _=o();void 0!==_&&(t=_)}}return t}r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[n,o,r]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,l=n[0],a=n[1],i=n[2],_=0;if(l.some((function(t){return 0!==e[t]}))){for(o in a)__webpack_require__.o(a,o)&&(__webpack_require__.m[o]=a[o]);if(i)var s=i(__webpack_require__)}for(t&&t(n);_<l.length;_++)r=l[_],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return __webpack_require__.O(s)},n=self["webpackChunkquick_form_vue3"]=self["webpackChunkquick_form_vue3"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(5860)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.b18ebd5a.js.map